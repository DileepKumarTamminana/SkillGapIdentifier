import json
import boto3

dynamodb = boto3.resource("dynamodb")
table = dynamodb.Table("SkillGapHistory")

def lambda_handler(event, context):
    body = json.loads(event["body"])

    history_id = body.get("historyId")
    favorite = body.get("favorite")

    table.update_item(
        Key={"historyId": history_id},
        UpdateExpression="SET favourite = :v",
        ExpressionAttributeValues={":v": favorite}
    )

    return {
        "statusCode": 200,
        "body": json.dumps({"message": "Updated", "favourite": favorite})
    }

